%package python
Summary: Python interface to MDSplus
Group: Applications/Acquisition
Release: --RELEASE--
requires: mdsplus--RPMFLAVOR---kernel,python,numpy,python-ctypes
#BuildArch: noarch

%description python
Python interface to MDSplus

%files python
/usr/local/mdsplus/mdsobjects/python

%post python
pushd $RPM_INSTALL_PREFIX/mdsplus/mdsobjects/python >/dev/null 2>&1
python setup.py install --record=$RPM_INSTALL_PREFIX/mdsplus/.python_rpm_files_do_not_remove--RPMFLAVOR------RELEASE-- >/dev/null 2>&1
popd >/dev/null 2>&1

%preun python
if [ -r $RPM_INSTALL_PREFIX/mdsplus/.python_rpm_files_do_not_remove--RPMFLAVOR------RELEASE-- ]
then
  awk '{system("rm -f \""$0"\"")}' $RPM_INSTALL_PREFIX/mdsplus/.python_rpm_files_do_not_remove--RPMFLAVOR------RELEASE--
  awk -F/ '{dir=""; for (i=2;i<NF-1;i++) {dir=dir "/" $i;} system("find " dir " -type d -empty -delete");exit}' $RPM_INSTALL_PREFIX/mdsplus/.python_rpm_files_do_not_remove
  rm -f $RPM_INSTALL_PREFIX/mdsplus/.python_rpm_files_do_not_remove--RPMFLAVOR------RELEASE--
fi


