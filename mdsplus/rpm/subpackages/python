%package python
Summary: Python interface to MDSplus
Group: Applications/Acquisition
Release: --RELEASE--
requires: mdsplus--RPMFLAVOR---kernel,python,numpy,python-ctypes
#BuildArch: noarch

%description python
Python interface to MDSplus

%files python
/usr/local/mdsplus/mdsobjects/python

%post python
pushd $RPM_INSTALL_PREFIX/mdsplus/mdsobjects/python >/dev/null 2>&1
file_list=$RPM_INSTALL_PREFIX/mdsplus/.python_rpm_files_do_not_remove--RPMFLAVOR------RELEASE--
python setup.py install --record=$file_list >/dev/null 2>&1
popd >/dev/null 2>&1

%preun python
file_list=$RPM_INSTALL_PREFIX/mdsplus/.python_rpm_files_do_not_remove--RPMFLAVOR------RELEASE--
if [ -r $file_list ]
then
  awk '{system("rm -f \""$0"\"")}' $file_list
  awk -F/ '{dir=""; for (i=2;i<NF-1;i++) {dir=dir "/" $i;} system("find " dir " -type d -empty -delete");exit}' $file_list
  rm -f $file_list
fi


