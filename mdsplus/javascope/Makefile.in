SHELL=/bin/sh
prefix=@prefix@
top_srcdir=@top_srcdir@
RM=$(top_srcdir)/devscripts/rm_if
JAVADIR = @MAKEJAVADIR@classes
JAVAC = @JAVAC@
JAR = @JAR@
INSTALL=@top_srcdir@/conf/install-sh -c
DOCS=jScope.html data_popup.jpg data_setup.jpg frame_popup.jpg image_setup.jpg jScope.jpg 

APPLETSOURCES = RotateFilter.java NetworkProvider.java DataProvider.java Frames.java\
		JiNcVar.java Descriptor.java Grid.java Waveform.java JiNcVarFloat.java\
		JiDim.java RdaAccess.java WaveInterface.java JiSlabIterator.java TwuAccess.java\
		JiNcVarInt.java TWUDataProvider.java JiSlab.java JiVar.java WavePopup.java\
		JiNcSource.java JiNcVarByte.java JiNcVarDouble.java JetDataProvider.java\
		MultiWavePopup.java MdsMessage.java DataAccessURL.java MdsConnection.java\
		WaveDisplay.java LocalProvider.java JiVarImpl.java SignalCache.java JiNcVarChar.java\
		FtuProvider.java NetworkListener.java WaveformEvent.java ConnectionEvent.java

SOURCES = AboutWindow.java            Grid.java                   JiVarImpl.java              RowColumnContainer.java     WaveformListener.java \
Base64.java                 JetDataProvider.java        LocalProvider.java          RowColumnLayout.java        WaveformManager.java\
ColorDialog.java            JiDataSource.java           MdsAccess.java              SetupDataDialog.java        WaveformMetrics.java\
CompositeWaveDisplay.java   JiDim.java                  MdsConnection.java          SetupDefaults.java          Waveform_2.java\
ConnectionEvent.java        JiNcSource.java             MdsMessage.java             Signal.java                 jScope.java\
ConnectionListener.java     JiNcVar.java                MdsWaveInterface.java       SignalCache.java            jScopeBrowseSignals.java\
DataAccess.java             JiNcVarByte.java            MultiWavePopup.java         TWUDataProvider.java        jScopeDefaultValues.java\
DataAccessURL.java          JiNcVarChar.java            MultiWaveform.java          TextorBrowseSignals.java    jScopeHelpDialog.java\
DataCached.java             JiNcVarDouble.java          NetworkEvent.java           WaveContainerEvent.java     jScopeMultiWave.java\
DataProvider.java           JiNcVarFloat.java           NetworkListener.java        WaveContainerListener.java  jScopeMultiWave_2.java\
DataServerItem.java         JiNcVarImp.java             NetworkProvider.java        WaveInterface.java          jScopeWaveContainer.java\
DemoProvider.java           JiNcVarInt.java             ProfileDialog.java          WavePopup.java              jScopeWaveContainer_2.java\
Descriptor.java             JiNcVarShort.java           RandomAccessData.java       Waveform.java               jScopeWavePopup.java\
FontSelection.java          JiSlab.java                 RdaAccess.java              WaveformContainer.java      jScope_1.java\
Frames.java                 JiSlabIterator.java         jScopeProperties.java       WaveformContainer_2.java	JetMdsProvider.java\
FtuProvider.java            JiVar.java                  RotateFilter.java           WaveformEvent.java

CLASSES = $(SOURCES:.java=.class)

all:	@MAKEBINDIR@ @MAKEBINDIR@jScope @MAKEJAVADIR@ @MAKEJAVADIR@classes @MAKEJAVADIR@classes/docs @MAKEJAVADIR@classes/jScope.jar  @MAKEJAVADIR@classes/WaveDisplay.jar docs 

clean: 
	@ $(RM) *.class
	@ $(RM) @MAKEBINDIR@jScope
	@ $(RM) @MAKEJAVADIR@classes/jScope.jar
	@ $(RM) @MAKEJAVADIR@classes/WaveDisplay.jar

depend: ; @ :

install:
	if [ ! -d @exec_prefix@/java/classes ] ; then \
                mkdirhier @exec_prefix@/java/classes ; \
                chmod -R 755 @exec_prefix@/java; \
        fi;
	$(INSTALL) -m 644  @MAKEJAVADIR@classes/jScope.jar @exec_prefix@/java/classes
	$(INSTALL) -m 644  @MAKEJAVADIR@classes/WaveDisplay.jar @exec_prefix@/java/classes
	$(INSTALL) -m 644  jScope.properties @exec_prefix@/java/classes
	$(INSTALL) -m 755  @MAKEBINDIR@jScope @exec_prefix@/bin

@MAKEJAVADIR@ : ; mkdir @MAKEJAVADIR@

@MAKEJAVADIR@classes : ; mkdir @MAKEJAVADIR@classes

@MAKEJAVADIR@classes/docs : ; mkdir @MAKEJAVADIR@classes/docs

@MAKEJAVADIR@classes/jScope.jar: jScope.class CompositeWaveDisplay.class
	$(JAR) c0f $@ *.class

@MAKEJAVADIR@classes/WaveDisplay.jar: $(APPLETSOURCES)
	rm *.class
	$(JAVAC) -g  $(APPLETSOURCES) 
	$(JAR) c0f $@ *.class

jScope.class: 	$(SOURCES)
	$(JAVAC) -g jScope.java TextorBrowseSignals.java

CompositeWaveDisplay.class: 	$(SOURCES)
	$(JAVAC) -g CompositeWaveDisplay.java

@MAKEBINDIR@ : ; mkdir @MAKEBINDIR@

@MAKEBINDIR@jScope : jScope.template
	cp jScope.template $@
	chmod a+x $@

docs: $(DOCS) about_jscope.jpg 
	cp $(DOCS) @MAKEJAVADIR@classes/docs
	cp about_jscope.jpg @MAKEJAVADIR@classes
