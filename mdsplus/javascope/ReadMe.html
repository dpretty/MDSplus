<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Gabriele Manduchi">
   <meta name="GENERATOR" content="Mozilla/4.5 [en] (WinNT; I) [Netscape]">
   <title>jScope</title>
</head>
<body>

<blockquote>
<blockquote>
<blockquote>
<center><b><font size=+3>&nbsp;jScope</font></b></center>
</blockquote>
jScope is a Java tool for the display of waveforms. Its concepts derive
from the MDSPlus Scope, a poular tool for data visualization. jScope adds
new features, such as color support and error bars.
<br>With jScope it is possible to define a set of panels and a set of waveforms
is associated with each panel. Once the Waveform(s) have been displayed,
it is possible to zoom parts of them, to move a cursor in order to get
exact coordinates, and to drag waveforms.
<p>Following is a brief&nbsp; summary of the options currently available
in jScope:
<p><b>Main Menu bar</b>:
<br>&nbsp;&nbsp;&nbsp; - <u>File</u>:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -<i>New Window</i>: creates
a new jScope windows
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -<i>Close</i>: closes the
current window
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -<i>Exit</i>: quit the application
<p>&nbsp;&nbsp;&nbsp; - <u>Pointer mode</u>: defines the current mouse
behaviour, which can be set as follows:
<blockquote>-<i>Point</i>: in this configuration, a crosshair is present
on each panel, and can be moved over the waveform.&nbsp; The corresponding
point coordinates are displayed&nbsp; on a bottom line, and crosshairs
on the other panels are moved accordingly to the time coordinates of the
selected crosshair. When more tha one waveform is displayed on the same
panel, clicking the mouse near one waveform, locks the crosshair to the
selected waveform (as indicated also by the colour of the crosshair). The
bottom line indicates which waveform is currently selected. Clicking MB2
mouse button when in point mode sets all the scales of the waveforms (both
X and Y) to the scale of the selected panel.
<p>-<i>Zoom</i>: when in Zoom mode it is possible to drag the mouse in
order to define a zoom region. Clicking MB1 mouse button when in Zoom mode
also enlarges the waveform, centered around the current mouse position.
<p>-<i>Pan</i>: when in Pan mode, it is possible to drag the waveform(s)
of the selected panel.
<p>-<i>Copy</i>: in Copy mode, it is possible to select one panel (clicking
MB1 mouse button) and copy its contents in the other panels (clicking MB2
mouse button). Deselection is made by clicking MB2 mouse button in the
selected panel.
<br>&nbsp;</blockquote>
Pointer modes are also selectable using the bottom radio boxes.
<p>- <u>Prin</u>t:
<blockquote>- <i>Print All</i>: prints all the waveforms.</blockquote>
- <u>Customize</u>:
<blockquote>- <i>Global Setting</i>: defines a subset of the waveform settings
which is valid for all waveforms (see description of waveform settings
below). It defines also grid configuration, such as the number the number
of vertical and horizontal grids.
<p>- <i>Window</i>: defines the number of panels. Panels can then be re-dimensioned
by dragging the small handles between panels.
<p>- <i>Font Selection</i>: defines the font to be used for labels and
numbers in jScope
<p>- <i>Color list</i>: defines the color palette, which is then used to
assign colors to waveforms.
<p>- <i>Printer</i>: to be used for printer selection. It appears only
using JDK 1.2.
<p>- <i>Page setup</i>: It appears only using JDK 1.2, to be used for page
orientation and print margins.
<p>-<i>Public variables</i>: defines the context for data access (see customization
section for using this feature in non MDSPlus systems)
<p>- <i>Brief erro</i>r: defines complete or reduced error reporting (MDSPlus
version only).
<p>-<i> Use last Saved Setting, Use Saved Setting from... </i>: retrieve
the a saved jScope configuration. jScope configurations can be saved in
files, and reloaded at any time. The name of a configuration file can be
defined as a command argument. e.g. java jScope &lt;configuration filename>.
<p>- <i>Save current setting, Save current setting as</i>: save current
configuration in a file.</blockquote>
- <u>Autoscale</u>: used to redisplay full waveforms (e.g. after zooming
or dragging) it is a subset of a popup menu described below.
<blockquote>-<i>All</i>: autoscale all signals
<p>-<i>All y</i>: autoscale only y values.</blockquote>
-<u>Network</u>: defines current connection to data.
<blockquote>- <i>Fast network access</i>: enables data reduction over the
network (MDSplus version only)
<p>-<i> Servers</i>: defines data source. A server can be local or remote.
In the latter case it is defined by its IP address. The current server
can be defined at the command line as follows: java -Ddata.address=&lt;IP
address> jScope. The current server is displayed in the bottom line on
the right.
<p>- <i>Edit server list</i>: allows to add new servers on the server list.</blockquote>
<b>Popup Menu</b>
<p>A popup menu is displayed clicking MB3 mouse button on a panel (except
in Copy mode). The first item of this menu defines the contents of the
selected panel and activates a setup form. The form defines the following
fields:
<blockquote>- <u>Title</u>: the title of the panel (optional)
<br>- <u>Signal Label</u>: the string to appear in the legend associated
with the signal. If no label is defined, the definition of the Y axis of
the signal is displayed.
<br>- <u>Y</u>: the y axis of the signal
<br>- <u>Y</u> label: the label associated with y axis (optional)
<br>- <u>X</u>: the x axis of the signal (optional, see below how jScope
handles the case in which no x axis is specified)
<br>- <u>X label:</u> the label associated with x axis (optional)
<br>-<u>Xmin, Xmax, Ymin, Ymax</u>: maximum and minimum values for x and
y axis (optional)
<br>-<u>Experiment:</u> the name of the experiment (pulse file)
<br>-<u>Shot</u>: the shot number
<br>-<u>Update event:</u> the name of the event which generates an automaic
update (MDSPlus version only)
<br>-<u>Default node</u>: the default node in expression evaluation (MDSPlus
version only)</blockquote>
It is possible to define a set of signals using the form: after filling
the fields and pressing &lt;return>, the signal is added to the list. Definitions
can be modified by selecting the signal on the list. To add a new signal
to the list, select the first item; to remove a signal from the list, select
it and press &lt;del>.
<br>Clicking the <u>expand expr</u> button, a popup window is displayed,
which allows easier typing of long specifications of the X and Y axis.
It is possible then to define maximum and minimum errors for displaying
error bars, by clicking <u>button error...</u>. The other elements are
still not implemented (browse). Most fields have a toggle button associated
with them: when selected, the value of the corresponding field is taken
from the global configuration (see before). For the definition of the shot
field it is also possible to use the bottom shot field. In this case a
set or a range of shots can be defined: a set is specified by the following
syntax: [&lt;sho1>, ,shot2>, ...]; a range by: &lt;first_shot>:&lt;last_shot>.
Once a signal has been added to the list, the corresponding color and type
of marker can be set first selecting the signal and then using the pull-down
menus on the right of the form.
<br>When a signal in the signal list is selected in the Setup data source
popup form, it is possible to define the associated marker and color, as
well to define wether the interpolating line has to be displayed and the
marker step, i.e. the number of data points for each visible marker.
<p>The second item of the Waveform popup menu allows the selection of the
associated waveform (indicated by a red border around the selected waveform).
Waveform selection is used as a fast way for defining waveforms: in this
case the name of the signal can be typed in the bottom <i>Signal</i> text
field and inserted in the selected waveform by pressing &lt;Return>. The
name refers only to the Y Value field of the Setup popup form; all the
other parameters are taken from the global configuration. Multiple waveforms
can be inserted by consecutively typing the waveform name and pressing
&lt;Return> in the Signal field. If no wave panel is selected and new signals
are entered, a new panel is created for each signal.
<p>The other two items of the Waveform popup menu allow the definition
of legend for the signals associated with the waveform. The legen can be
activated/deactivated and positioned where needed in the waveform window.
The associated labels associated with the signals are displayed in the
legend. If no label is associated with a given signal, the Y-value name
is displayed istead.
<p>The <i>Signals </i>item of the Waveform popup menu allows a rapid activation/deactivation
of the currently defined signals. It is useful when dealing with multiple
signals to individually define their visibility in the waveform panel.
<p>The <i>Marker</i>, <i>Marker-step</i>, <i>Colors</i> and <i>Interpolate</i>
items of the Waveform popup menu are active only in point mode, i.e. when
one signal is selected, and allow a rapid definition of the associated
graphical configuration without opening the Setup data source popup form.
<p>The other items of the popup list allow rescalings of waveforms, and
their meanings are clear from the associated label.
<p>Finally the last item <i>Save as Text</i> writes the displayed waveforms
points in a text file.
<blockquote>&nbsp;</blockquote>
</blockquote>

<center><b><font size=+2>How to customize jScope to a non MDSplus system</font></b></center>

<p>Using jScope in another system requires the implementation of two classes<i>
LocalProvider</i>, used to access local data, and <i>NetworkProvider</i>,
used to access remote data, both implementing the <i>DataProvider</i> interface.
<p><i>DataProvider</i> defines the following methods, which must be implemented
by both classes:
<p><i>public void SetEnvironment(String s)</i>&nbsp; defines the environment
for data retirieval: the argument is a String which defines &lt;name value>
pairs, which is defined by the customize-global variables menu bar item.
In MDSplus, for example, it is used to set global variables which can then
be used in expression evaluation, i.e. when retrieving signals. If the
system does not support anything similar, the&nbsp; simply returns.
<p><i>public void Update(String experiment, int shot)</i> called before
each signal readout to define the current experiment and shot.
<p><i>public String GetString(String in): </i>called when a string (i.e.
a title of a panel, or a X/Y label) needs to be evalueted. If no evaluation
is required, simply return the argument.
<p><i>public float GetFloat(String in)</i>: called when a single floating
point value is required. It is used to evaluate X/Y min/max values when
defined in the setup form. If no particular evaluation is required, simply
return <i>new Float(in).floatValue()</i>.
<p><i>public float[] GetFloatArray(String in)</i>: called each time a signal
must be read. The argument is the specification given in Y field of the
setup form. Its interpretation is left to this method.
<p><i>public int[] GetIntArray(String in)</i>: called to evaluate shot
number(s). The argument to be evaluated is the content of the bottom <i>shot</i>
field, possibly defining an array of shot numbers.
<p><i>public String GetXSpecification(String in)</i>: called when data
must be retrieved, but no specification of the X axis is given. Most systems,
in fact provide some method for evaluating x axis, based on the specification
of the signal. The returned string is then passed to <i>GetFloatArray</i>
to retrieve x values.
<p><i>public String ErrorString()</i>: if <i>GetFloatArray</i> returns
null, jScope assumes that an error occurred in data retrievel, and calls
<i>ErrorString</i>
to get the description of the error, in order to display it on a popup
window.
<p><i>public String GetDefaultTitle(String in_y[])</i>
<br><i>public String GetDefaultXLabel(String in_y[])</i>
<br><i>public String GetDefaultYLabel(String in_y[])</i>
<br>These methods are called when fields title, x label and y label, repectively,
are left empty. The argument is&nbsp; the content of the y value field.
If no default label is defined, these methods return null.
<p>The following methods refer to more specialized tasks, currently supported
by MDSplus. Implement them as follows:
<p>public boolean SupportsAsynch() { return false; }
<br>public void addMdsEventListener(MdsEventListener l, String event){}
<br>public void removeMdsEventListener(MdsEventListener l, String event){}
<br>&nbsp;
<p>Besides implementing the DataProvider interfaces, class <i>LocalProvider</i>
must provide a constructor with no arguments, (and will likely define a
set of native methods, linking against the data access libraries), while
class <i>NetworkProvider</i> must provide a constructor with one String
argument, i.e. the IP address of the associated server. Class NetworkProvider
will handle the required protocol with the remote data server.
<br>&nbsp;
<br>&nbsp;
<p>For further information, contact me at the following e-mail address:&nbsp;
manduchi@igi.pd.cnr.it
<br>&nbsp;
<br>&nbsp;
<blockquote>&nbsp;</blockquote>
</blockquote>

</body>
</html>
